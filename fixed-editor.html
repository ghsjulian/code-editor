<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Professional Code Editor</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Ace Editor -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.23.4/ace.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.23.4/ext-language_tools.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.23.4/ext-emmet.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.23.4/ext-statusbar.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.23.4/ext-beautify.js"></script>
    <style>
        /* Editor layout */
        #editor {
            position: absolute;
            top: 50px;
            right: 0;
            bottom: 30px;
            left: 250px;
        }
        
        /* File tabs */
        .file-tab {
            position: relative;
            min-width: 120px;
            max-width: 200px;
        }
        .file-tab.active {
            background-color: #1e293b;
            border-bottom: 2px solid #60a5fa;
        }
        .file-tab .close-btn {
            opacity: 0;
            transition: opacity 0.2s;
        }
        .file-tab:hover .close-btn {
            opacity: 1;
        }
        .file-tab.dirty:after {
            content: "•";
            position: absolute;
            right: 8px;
            top: 8px;
            color: #60a5fa;
            font-size: 1.2rem;
        }
        
        /* Terminal */
        #terminal {
            height: 0;
            transition: height 0.3s ease;
            font-family: 'Courier New', monospace;
        }
        #terminal.active {
            height: 200px;
        }
        #terminal-content {
            height: calc(100% - 30px);
            overflow-y: auto;
        }
        
        /* Folder structure */
        .folder-item {
            position: relative;
            cursor: pointer;
            padding-left: 20px;
        }
        .folder-item:before {
            content: "▶";
            position: absolute;
            left: 5px;
            color: #6b7280;
            font-size: 0.8rem;
        }
        .folder-item.open:before {
            content: "▼";
        }
        .folder-contents {
            display: none;
            margin-left: 15px;
        }
        .folder-item.open + .folder-contents {
            display: block;
        }
        
        /* Responsive design */
        @media (max-width: 768px) {
            #sidebar {
                transform: translateX(-100%);
            }
            #sidebar.active {
                transform: translateX(0);
            }
            #editor {
                left: 0;
            }
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #1a1a1a;
        }
        ::-webkit-scrollbar-thumb {
            background: #444;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
        
        /* Syntax highlighting preview */
        .syntax-preview {
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
        }
        
        /* Search box */
        .search-box {
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
        }
        
        /* Draggable area */
        .terminal-handle {
            height: 5px;
            cursor: ns-resize;
            background-color: #333;
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-200 h-screen flex flex-col overflow-hidden">
    <!-- Header -->
    <header class="bg-gray-800 shadow-lg z-10">
        <div class="flex items-center justify-between p-2">
            <!-- Left side - Menu and title -->
            <div class="flex items-center space-x-4">
                <button id="menu-toggle" class="text-gray-300 hover:text-white focus:outline-none p-2 rounded-md hover:bg-gray-700">
                    <i class="fas fa-bars"></i>
                </button>
                <div class="hidden md:flex items-center space-x-2">
                    <i class="fas fa-code text-blue-400"></i>
                    <span class="font-semibold">ProEditor</span>
                </div>
                
                <!-- File operations -->
                <div class="hidden md:flex space-x-1">
                    <button id="new-file-btn" class="text-gray-300 hover:text-white p-2 rounded-md hover:bg-gray-700" title="New File (Ctrl+N)">
                        <i class="fas fa-file"></i>
                    </button>
                    <button id="save-file-btn" class="text-gray-300 hover:text-white p-2 rounded-md hover:bg-gray-700" title="Save (Ctrl+S)">
                        <i class="fas fa-save"></i>
                    </button>
                </div>
            </div>

            <!-- Center - File tabs -->
            <div class="flex-1 mx-4 overflow-x-auto scrollbar-hide">
                <div id="tab-container" class="flex space-x-1">
                    <!-- Tabs will be added dynamically -->
                </div>
            </div>

            <!-- Right side - Controls -->
            <div class="flex items-center space-x-4">
                <!-- Run button -->
                <button id="run-btn" class="p-2 text-gray-300 hover:text-white rounded-md hover:bg-gray-700 hidden md:block" title="Run Code (F5)">
                    <i class="fas fa-play text-green-400"></i>
                </button>
                
                <!-- Search button -->
                <button id="search-btn" class="p-2 text-gray-300 hover:text-white rounded-md hover:bg-gray-700" title="Find (Ctrl+F)">
                    <i class="fas fa-search"></i>
                </button>
                
                <!-- Terminal toggle -->
                <button id="terminal-btn" class="p-2 text-gray-300 hover:text-white rounded-md hover:bg-gray-700 hidden md:block" title="Toggle Terminal (Ctrl+`)">
                    <i class="fas fa-terminal"></i>
                </button>
                
                <!-- Git controls -->
                <div class="relative group hidden md:block">
                    <button id="git-btn" class="p-2 text-gray-300 hover:text-white rounded-md hover:bg-gray-700">
                        <i class="fab fa-git-alt"></i>
                    </button>
                    <div class="absolute right-0 mt-2 w-64 bg-gray-800 rounded-md shadow-lg z-20 hidden group-hover:block hover:block">
                        <div class="p-2">
                            <div class="flex items-center justify-between p-2">
                                <span class="text-sm">Branch: main</span>
                                <button class="text-xs px-2 py-1 bg-gray-700 rounded hover:bg-gray-600">
                                    <i class="fas fa-code-branch"></i> Switch
                                </button>
                            </div>
                            <div class="border-t border-gray-700 mt-2 pt-2">
                                <button class="w-full text-left px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 rounded-md flex items-center">
                                    <i class="fas fa-upload mr-2"></i> Push
                                </button>
                                <button class="w-full text-left px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 rounded-md flex items-center">
                                    <i class="fas fa-download mr-2"></i> Pull
                                </button>
                                <button class="w-full text-left px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 rounded-md flex items-center">
                                    <i class="fas fa-code-merge mr-2"></i> Merge
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Theme selector -->
                <div class="relative group">
                    <button id="theme-btn" class="p-2 text-gray-300 hover:text-white rounded-md hover:bg-gray-700">
                        <i class="fas fa-palette"></i>
                    </button>
                    <div class="absolute right-0 mt-2 w-64 bg-gray-800 rounded-md shadow-lg z-20 hidden group-hover:block hover:block">
                        <div class="p-2">
                            <h4 class="px-2 py-1 text-sm font-medium border-b border-gray-700">Editor Themes</h4>
                            <div class="grid grid-cols-2 gap-1 mt-2">
                                <div class="theme-option px-3 py-2 text-sm cursor-pointer hover:bg-gray-700 rounded-md flex items-center" data-theme="monokai">
                                    <div class="w-3 h-3 rounded-full bg-amber-500 mr-2"></div>
                                    Monokai
                                </div>
                                <div class="theme-option px-3 py-2 text-sm cursor-pointer hover:bg-gray-700 rounded-md flex items-center" data-theme="dracula">
                                    <div class="w-3 h-3 rounded-full bg-purple-600 mr-2"></div>
                                    Dracula
                                </div>
                                <div class="theme-option px-3 py-2 text-sm cursor-pointer hover:bg-gray-700 rounded-md flex items-center" data-theme="github">
                                    <div class="w-3 h-3 rounded-full bg-gray-200 mr-2"></div>
                                    GitHub
                                </div>
                                <div class="theme-option px-3 py-2 text-sm cursor-pointer hover:bg-gray-700 rounded-md flex items-center" data-theme="solarized_dark">
                                    <div class="w-3 h-3 rounded-full bg-blue-400 mr-2"></div>
                                    Solarized
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- User profile dropdown -->
                <div class="relative group">
                    <button id="profile-btn" class="flex items-center space-x-2 text-gray-300 hover:text-white">
                        <div class="w-8 h-8 rounded-full bg-gradient-to-br from-purple-500 to-blue-500 flex items-center justify-center">
                            <span class="text-white font-medium">AD</span>
                        </div>
                    </button>
                    <div class="absolute right-0 mt-2 w-56 bg-gray-800 rounded-md shadow-lg z-20 hidden group-hover:block hover:block">
                        <div class="p-4 border-b border-gray-700 flex items-center space-x-3">
                            <div class="w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-blue-500 flex items-center justify-center">
                                <span class="text-white font-medium">AD</span>
                            </div>
                            <div>
                                <p class="font-medium">Alex Developer</p>
                                <p class="text-xs text-gray-400">Pro Plan</p>
                            </div>
                        </div>
                        <div class="p-2">
                            <a href="#" class="block px-4 py-2 text-gray-300 hover:bg-gray-700 rounded-md"><i class="fas fa-user mr-2"></i>Profile</a>
                            <a href="#" class="block px-4 py-2 text-gray-300 hover:bg-gray-700 rounded-md"><i class="fas fa-cog mr-2"></i>Settings</a>
                            <a href="#" class="block px-4 py-2 text-gray-300 hover:bg-gray-700 rounded-md"><i class="fas fa-sign-out-alt mr-2"></i>Sign Out</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Search Box (hidden by default) -->
    <div id="search-box" class="absolute top-12 right-4 bg-gray-800 rounded-md shadow-xl z-20 hidden">
        <div class="p-2 flex items-center border-b border-gray-700">
            <input type="text" id="search-input" placeholder="Search..." class="bg-gray-700 text-white px-3 py-1 rounded-md w-64 focus:outline-none focus:ring-1 focus:ring-blue-500">
            <button id="search-close" class="ml-2 text-gray-400 hover:text-white p-1">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="p-2 text-sm text-gray-400">
            <div class="flex justify-between mb-1">
                <span>Match Case</span>
                <label class="relative inline-flex items-center cursor-pointer">
                    <input type="checkbox" id="match-case" class="sr-only peer">
                    <div class="w-8 h-4 bg-gray-700 rounded-full peer peer-checked:after:translate-x-4 peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:rounded-full after:h-3 after:w-3 after:transition-all peer-checked:bg-blue-500"></div>
                </label>
            </div>
            <div class="flex justify-between">
                <span>Whole Word</span>
                <label class="relative inline-flex items-center cursor-pointer">
                    <input type="checkbox" id="whole-word" class="sr-only peer">
                    <div class="w-8 h-4 bg-gray-700 rounded-full peer peer-checked:after:translate-x-4 peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:rounded-full after:h-3 after:w-3 after:transition-all peer-checked:bg-blue-500"></div>
                </label>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="flex flex-1 overflow-hidden bg-gray-900">
        <!-- Sidebar -->
        <aside id="sidebar" class="w-64 bg-gray-800 text-gray-300 border-r border-gray-700 h-full fixed md:relative z-10 transition-all duration-300">
            <!-- Explorer Header -->
            <div class="p-4 border-b border-gray-700 flex justify-between items-center">
                <h2 class="font-medium">EXPLORER</h2>
                <div class="flex space-x-2">
                    <button class="text-gray-400 hover:text-white">
                        <i class="fas fa-ellipsis-h"></i>
                    </button>
                    <button class="text-gray-400 hover:text-white" id="new-folder-btn">
                        <i class="fas fa-folder-plus"></i>
                    </button>
                    <button class="text-gray-400 hover:text-white" id="refresh-files-btn">
                        <i class="fas fa-sync-alt"></i>
                    </button>
                </div>
            </div>

            <!-- File Tree -->
            <div id="file-tree" class="p-2 overflow-y-auto h-full">
                <div class="folder-item open mb-2">PROJECT_ROOT</div>
                <div class="folder-contents">
                    <!-- HTML Files -->
                    <div class="folder-item open">public</div>
                    <div class="folder-contents">
                        <div class="file-item flex items-center py-1 px-2 hover:bg-gray-700 rounded cursor-pointer" data-file="example.html" data-type="html">
                            <i class="fab fa-html5 text-red-400 mr-2"></i>
                            <span>index.html</span>
                        </div>
                        <div class="file-item flex items-center py-1 px-2 hover:bg-gray-700 rounded cursor-pointer" data-file="about.html" data-type="html">
                            <i class="fab fa-html5 text-red-400 mr-2"></i>
                            <span>about.html</span>
                        </div>
                    </div>

                    <!-- CSS Files -->
                    <div class="folder-item open">styles</div>
                    <div class="folder-contents">
                        <div class="file-item flex items-center py-1 px-2 hover:bg-gray-700 rounded cursor-pointer" data-file="styles.css" data-type="css">
                            <i class="fab fa-css3-alt text-blue-400 mr-2"></i>
                            <span>styles.css</span>
                        </div>
                        <div class="file-item flex items-center py-1 px-2 hover:bg-gray-700 rounded cursor-pointer" data-file="responsive.css" data-type="css">
                            <i class="fab fa-css3-alt text-blue-400 mr-2"></i>
                            <span>responsive.css</span>
                        </div>
                    </div>

                    <!-- JavaScript Files -->
                    <div class="folder-item open">scripts</div>
                    <div class="folder-contents">
                        <div class="file-item flex items-center py-1 px-2 hover:bg-gray-700 rounded cursor-pointer" data-file="app.js" data-type="javascript">
                            <i class="fab fa-js text-yellow-300 mr-2"></i>
                            <span>app.js</span>
                        </div>
                        <div class="file-item flex items-center py-1 px-2 hover:bg-gray-700 rounded cursor-pointer" data-file="utils.js" data-type="javascript">
                            <i class="fab fa-js text-yellow-300 mr-2"></i>
                            <span>utils.js</span>
                        </div>
                    </div>

                    <!-- Images -->
                    <div class="folder-item">assets </div>
                    <div class="folder-contents">
                        <div class="folder-item">images</div>
                        <div class="folder-contents">
                            <div class="file-item flex items-center py-1 px-2 hover:bg-gray-700 rounded cursor-pointer" data-file="logo.png" data-type="image">
                                <i class="fas fa-image text-purple-400 mr-2"></i>
                                <span>logo.png</span>
                            </div>
                        </div>
                    </div>

                    <!-- Config Files -->
                    <div class="file-item flex items-center py-1 px-2 hover:bg-gray-700 rounded cursor-pointer" data-file="package.json" data-type="json">
                        <i class="fas fa-cog text-gray-400 mr-2"></i>
                        <span>package.json</span>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Editor Area -->
        <main class="flex-1 relative">
            <div id="editor">
                <!-- Editor content will be dynamically loaded -->
            </div>

            <!-- Terminal -->
            <div id="terminal" class="absolute bottom-0 left-0 right-0 bg-gray-800 border-t border-gray-700 p-2">
                <div class="terminal-handle"></div>
                <div id="terminal-content" class="h-full overflow-y-auto text-white">
                    <p>Terminal output will appear here...</p>
                </div>
            </div>

            <!-- Status Bar -->
            <div class="absolute bottom-0 left-0 right-0 bg-gray-800 border-t border-gray-700 p-1 px-3 text-xs flex justify-between items-center">
                <div class="flex space-x-4">
                    <span class="flex items-center">
                        <i class="fas fa-code-branch text-gray-400 mr-1"></i>
                        <span>main</span>
                    </span>
                    <span class="flex items-center">
                        <i class="fas fa-shield-alt text-yellow-400 mr-1"></i>
                        <span>ESLint</span>
                    </span>
                </div>
                <div class="flex space-x-4">
                    <span class="flex items-center">
                        <i class="fas fa-keyboard text-gray-400 mr-1"></i>
                        <span>UTF-8</span>
                    </span>
                    <span class="flex items-center">
                        <i class="fas fa-language text-gray-400 mr-1"></i>
                        <span>JavaScript</span>
                    </span>
                    <span class="flex items-center">
                        <i class="fas fa-terminal text-gray-400 mr-1"></i>
                        <span>Ln 10, Col 15</span>
                    </span>
                </div>
            </div>
        </main>
    </div>

    <!-- JavaScript -->
    <script>
        // Initialize Ace Editor
        const editor = ace.edit("editor");
        editor.setTheme("ace/theme/monokai");
        editor.session.setMode("ace/mode/html");
        editor.setOptions({
            fontSize: "14px",
            enableBasicAutocompletion: true,
            enableLiveAutocompletion: true,
            enableSnippets: true
        });

        // Mobile menu toggle
        const menuToggle = document.getElementById('menu-toggle');
        const sidebar = document.getElementById('sidebar');
        menuToggle.addEventListener('click', () => {
            sidebar.classList.toggle('active');
        });

        // Theme selection
        document.querySelectorAll('.theme-option').forEach(option => {
            option.addEventListener('click', function() {
                const theme = this.getAttribute('data-theme');
                editor.setTheme(`ace/theme/${theme}`);
            });
        });

        // File system functionality
        const fileItems = document.querySelectorAll('.file-item');
        const tabContainer = document.getElementById('tab-container');
        const openedFiles = new Set();
        
        // Function to create a file tab
        function createFileTab(fileName, fileType) {
            if (openedFiles.has(fileName)) return;
            
            openedFiles.add(fileName);
            
            const tab = document.createElement('div');
            tab.className = 'file-tab px-4 py-2 rounded-t-md flex items-center hover:bg-gray-700';
            tab.dataset.file = fileName;
            
            // Set icon based on file type
            let iconClass = '';
            let iconColor = '';
            switch(fileType) {
                case 'html':
                    iconClass = 'fab fa-html5';
                    iconColor = 'text-red-400';
                    break;
                case 'css':
                    iconClass = 'fab fa-css3-alt';
                    iconColor = 'text-blue-400';
                    break;
                case 'javascript':
                    iconClass = 'fab fa-js';
                    iconColor = 'text-yellow-300';
                    break;
                case 'json':
                    iconClass = 'fas fa-cog';
                    iconColor = 'text-gray-400';
                    break;
                case 'image':
                    iconClass = 'fas fa-image';
                    iconColor = 'text-purple-400';
                    break;
                default:
                    iconClass = 'fas fa-file';
                    iconColor = 'text-gray-400';
            }
            
            tab.innerHTML = `
                <i class="${iconClass} ${iconColor} mr-2"></i>
                <span>${fileName}</span>
                <button class="ml-2 text-gray-400 hover:text-white close-btn">
                    <i class="fas fa-times text-xs"></i>
                </button>
            `;
            
            tabContainer.appendChild(tab);
            
            // Set active tab
            setActiveTab(tab);
            
            // Add close functionality
            tab.querySelector('.close-btn').addEventListener('click', (e) => {
                e.stopPropagation();
                closeFileTab(tab);
            });
            
            // Add click functionality
            tab.addEventListener('click', () => {
                setActiveTab(tab);
                loadFileContent(fileName, fileType);
            });
            
            return tab;
        }
        
        // Function to set active tab
        function setActiveTab(tab) {
            document.querySelectorAll('.file-tab').forEach(t => t.classList.remove('active'));
            tab.classList.add('active');
        }
        
        // Function to close file tab
        function closeFileTab(tab) {
            openedFiles.delete(tab.dataset.file);
            tab.remove();
            
            // If no tabs left, clear editor
            if (openedFiles.size === 0) {
                editor.setValue('');
            }
        }
        
        // Function to load file content (mock implementation)
        function loadFileContent(fileName, fileType) {
            let content = '';
            let mode = '';
            
            switch(fileType) {
                case 'html':
                    content = `<!DOCTYPE html>\n<html>\n<head>\n\t<title>${fileName}</title>\n</head>\n<body>\n\t<h1>${fileName}</h1>\n</body>\n</html>`;
                    mode = 'ace/mode/html';
                    break;
                case 'css':
                    content = `/* ${fileName} */\nbody {\n\tmargin: 0;\n\tpadding: 0;\n\tfont-family: Arial, sans-serif;\n}`;
                    mode = 'ace/mode/css';
                    break;
                case 'javascript':
                    content = `// ${fileName}\n\nfunction init() {\n\tconsole.log('Hello from ${fileName}');\n}\n\ninit();`;
                    mode = 'ace/mode/javascript';
                    break;
                case 'json':
                    content = `{\n\t"name": "${fileName.replace('.json', '')}",\n\t"version": "1.0.0"\n}`;
                    mode = 'ace/mode/json';
                    break;
                case 'image':
                    content = `// Binary image data cannot be displayed in text editor`;
                    mode = 'ace/mode/text';
                    break;
                default:
                    content = `// Unknown file type`;
                    mode = 'ace/mode/text';
            }
            
            editor.session.setMode(mode);
            editor.setValue(content);
        }

        // File item click event
        fileItems.forEach(item => {
            item.addEventListener('click', function() {
                const fileName = this.getAttribute('data-file');
                const fileType = this.getAttribute('data-type');
                createFileTab(fileName, fileType);
                loadFileContent(fileName, fileType);
            });
        });

        // Terminal toggle functionality
        const terminalBtn = document.getElementById('terminal-btn');
        const terminal = document.getElementById('terminal');
        terminalBtn.addEventListener('click', () => {
            terminal.classList.toggle('active');
        });

        // Search functionality
        const searchBtn = document.getElementById('search-btn');
        const searchBox = document.getElementById('search-box');
        searchBtn.addEventListener('click', () => {
            searchBox.classList.toggle('hidden');
            document.getElementById('search-input').focus();
        });

        // Close search box
        document.getElementById('search-close').addEventListener('click', () => {
            searchBox.classList.add('hidden');
        });
    </script>
</body>
</html>
